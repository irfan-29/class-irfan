<%- include("partials/header") -%>


<div class="head">
  <h4>Delete Class</h4>
</div>

<div id="liveAlertPlaceholder"></div>

<div class="delete-add" style="display: flex; justify-content: space-between;">
  <form action="/back" method="post">
    <div style="float: left; ">
      <button type="submit" class="add btn btn-outline-danger" value="back" name="back">Back</button>
    </div>
  </form>
  <form action="/deleteAllClass" method="post">
    <div style="float: right;">
      <button type="submit" class="add btn btn-danger" id="liveAlertBtn" name="deleteAllClass">Delete All Classes</button>
    </div>
  </form>
</div>

<% keyPeriod.forEach(function(ele){ %>
  <% keyTiming.forEach(function(time){ %>
      <% if(ele.period==time.period){ %>
<div class="task" style="border-radius:20px;">
<div style="float: left; width: 93%; margin-top: 8px;">
  <h5 style="text-transform: capitalize; font-weight: 700; font-size: 1.35rem;"><%= ele.day %></h5>
  <p style="font-weight: 700; position: relative; top: 4px;"><%= ele.subject %></p>
  <p style="font-size: 1.1rem; font-weight: 500; position: relative; bottom: 4px;">Period: <%= ele.period %> (<%= time.start %> - <%= time.end %>)</p>
</div>
<div style="float: right; padding: 0;">
  <form action="/deleteClass" method="post">
    <button type="submit" class="add btn btn-outline-danger" style="border-radius: 50%; height: 40px; width: 40px;" name="deleteClass" value="<%= ele.day %>-<%= ele.subject %>-<%= ele.period %>-<%= time.start %>-<%= time.end %>">
      <img class="delete" src="images/delete.png" style="width: 22px; height: 23px; position: relative; bottom: 1.5px; right: 3.5px;" alt="delete"></button>
  </form>
</div>
</div>
<% } }); }); %>


<script>
  const alertPlaceholder = document.getElementById('liveAlertPlaceholder')
  const appendAlert = (message, type) => {
  const wrapper = document.createElement('div')
  wrapper.innerHTML = [
    `<figure class="notification_${type}">`,
      `<div class="notification_body_${type}">`,
        `<img src="images/${type}.png" title="Success" alt="Success" class="notification_icon_${type}"/>`,
        `${message}`, 
      '</div>',
      `<div class="notification_progress_${type}"></div>`,
    '</figure>',
  ].join('')

  alertPlaceholder.append(wrapper)
}


const alertTrigger = document.getElementById('liveAlertBtn');


if (alertTrigger) {
  alertTrigger.addEventListener('click', () => {
    appendAlert('All the classes has been Deleted!', 'danger')
  });
}
</script>



<%- include("partials/footer") -%>
